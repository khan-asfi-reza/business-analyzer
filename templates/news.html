<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Insights & News - Business Analyzer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="/assets/css/main.css">
</head>
<body class="min-h-screen flex flex-col bg-gradient-to-b from-slate-50 to-slate-100">
    {% include "components/navigation.html" %}

    <main class="flex-1">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="mb-12">
                <h1 class="text-4xl font-bold text-slate-900 mb-2">Market Insights & News</h1>
                <p class="text-slate-600">Latest news, sentiment analysis, and market trends across all companies and assets</p>
            </div>

            <!-- Sentiment Filter -->
            <div class="flex gap-3 mb-8 flex-wrap">
                <a href="/dashboard/news" class="px-4 py-2 {% if not sentiment_filter or sentiment_filter == 'all' %}bg-blue-600 text-white{% else %}bg-white text-slate-700 border border-slate-200{% endif %} rounded-full font-medium hover:bg-blue-700 hover:text-white transition">All News</a>
                <a href="/dashboard/news?sentiment=positive" class="px-4 py-2 {% if sentiment_filter == 'positive' %}bg-blue-600 text-white{% else %}bg-white text-slate-700 border border-slate-200{% endif %} rounded-full font-medium hover:bg-blue-700 hover:text-white transition">Positive</a>
                <a href="/dashboard/news?sentiment=neutral" class="px-4 py-2 {% if sentiment_filter == 'neutral' %}bg-blue-600 text-white{% else %}bg-white text-slate-700 border border-slate-200{% endif %} rounded-full font-medium hover:bg-blue-700 hover:text-white transition">Neutral</a>
                <a href="/dashboard/news?sentiment=negative" class="px-4 py-2 {% if sentiment_filter == 'negative' %}bg-blue-600 text-white{% else %}bg-white text-slate-700 border border-slate-200{% endif %} rounded-full font-medium hover:bg-blue-700 hover:text-white transition">Negative</a>
            </div>

            <!-- News List -->
            <div class="space-y-6">
                {% for item in news_items %}
                <article class="bg-white rounded-xl border border-slate-200 p-6 hover:shadow-lg hover:border-blue-200 transition">
                    <div class="flex items-start justify-between gap-4 mb-4">
                        <div class="flex-1">
                            <h2 class="text-xl font-bold text-slate-900 mb-2">{{ item.title }}</h2>
                            <div class="flex gap-3 flex-wrap items-center">
                                {% if item.sentiment_label %}
                                    {% if item.sentiment_label == 'positive' %}
                                    <span class="px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-700">Positive</span>
                                    {% elif item.sentiment_label == 'negative' %}
                                    <span class="px-3 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-700">Negative</span>
                                    {% else %}
                                    <span class="px-3 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-700">Neutral</span>
                                    {% endif %}
                                {% endif %}
                                <span class="px-3 py-1 bg-slate-100 text-slate-700 rounded-full text-xs font-medium">{{ item.content_type|title }}</span>
                                <span class="text-xs text-slate-500">{{ item.publish_date.strftime('%b %d, %Y') if item.publish_date else 'N/A' }}</span>
                            </div>
                        </div>
                        <a href="{{ item.source_url }}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:text-blue-700 flex-shrink-0" title="Open source">
                            <i data-lucide="external-link" class="w-5 h-5"></i>
                        </a>
                    </div>
                    <p class="text-slate-700 mb-4 leading-relaxed">{{ item.excerpt }}...</p>
                    <div class="flex items-center justify-between pt-4 border-t border-slate-200">
                        <div class="flex gap-4 text-xs text-slate-600">
                            <span><strong>Source:</strong> {{ item.source_name or 'Unknown' }}</span>
                            <span><strong>Scraped:</strong> {{ item.scraped_date.strftime('%b %d, %Y') if item.scraped_date else 'N/A' }}</span>
                        </div>
                        <a href="{{ item.source_url }}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:text-blue-700 font-semibold text-sm flex items-center gap-1">
                            Read Full Article
                            <i data-lucide="external-link" class="w-4 h-4"></i>
                        </a>
                    </div>
                </article>
                {% endfor %}

                {% if not news_items %}
                <div class="text-center py-12">
                    <i data-lucide="inbox" class="w-16 h-16 mx-auto text-slate-300 mb-4"></i>
                    <p class="text-slate-500 text-lg">No news articles found</p>
                </div>
                {% endif %}
            </div>

            <!-- Load More -->
            {% if has_more %}
            <div class="text-center mt-12">
                <a href="/dashboard/news?page={{ page + 1 }}{% if sentiment_filter %}&sentiment={{ sentiment_filter }}{% endif %}" class="px-8 py-3 border-2 border-blue-600 text-blue-600 rounded-lg font-semibold hover:bg-blue-50 transition inline-block">Load More Articles</a>
            </div>
            {% endif %}
        </div>
    </main>

    {% include "components/footer.html" %}
    {% include "components/script.html" %}
</body>
</html>